{"version":3,"sources":["node_modules/browser-pack/_prelude.js","public/js/sw/index.js","public/js/sw/preroll/index.js"],"names":[],"mappings":"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","file":"sw.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","var staticCacheName = 'wittr-static-v8';\nvar contentImgsCache = 'wittr-content-imgs';\nvar allCaches = [\n  staticCacheName,\n  contentImgsCache\n];\n\nself.addEventListener('install', function(event) {\n  event.waitUntil(\n    caches.open(staticCacheName).then(function(cache) {\n      return cache.addAll([\n        '/skeleton',\n        'js/main.js',\n        'css/main.css',\n        'imgs/icon.png',\n        'https://fonts.gstatic.com/s/roboto/v15/2UX7WLTfW3W8TclTUvlFyQ.woff',\n        'https://fonts.gstatic.com/s/roboto/v15/d-6IYplOFocCacKzxwXSOD8E0i7KZn-EPnyo3HZu7kw.woff'\n      ]);\n    })\n  );\n});\n\nself.addEventListener('activate', function(event) {\n  event.waitUntil(\n    caches.keys().then(function(cacheNames) {\n      return Promise.all(\n        cacheNames.filter(function(cacheName) {\n          return cacheName.startsWith('wittr-') &&\n                 !allCaches.includes(cacheName);\n        }).map(function(cacheName) {\n          return caches.delete(cacheName);\n        })\n      );\n    })\n  );\n});\n\nself.addEventListener('fetch', function(event) {\n  var requestUrl = new URL(event.request.url);\n\n  if (requestUrl.origin === location.origin) {\n    if (requestUrl.pathname === '/') {\n      event.respondWith(caches.match('/skeleton'));\n      return;\n    }\n    if (requestUrl.pathname.startsWith('/photos/')) {\n      event.respondWith(servePhoto(event.request));\n      return;\n    }\n    // respond to avatar urls by responding with\n    // the return value of serveAvatar(event.request)\n    if (requestUrl.pathname.startsWith('/avatars/')){\n      event.respondWith(serveAvatar(event.request));\n      return;\n    }\n  }\n\n  event.respondWith(\n    caches.match(event.request).then(function(response) {\n      return response || fetch(event.request);\n    })\n  );\n});\n\nfunction serveAvatar(request) {\n  // Avatar urls look like:\n  // avatars/sam-2x.jpg\n  // But storageUrl has the -2x.jpg bit missing.\n  // Use this url to store & match the image in the cache.\n  // This means you only store one copy of each avatar.\n  var storageUrl = request.url.replace(/-\\dx\\.jpg$/, '');\n\n  // return images from the \"wittr-content-imgs\" cache\n  // if they're in there. But afterwards, go to the network\n  // to update the entry in the cache.\n  //\n  // Note that this is slightly different to servePhoto!\n  return caches.open(contentImgsCache).then(function(cache){\n    return cache.match(storageUrl).then(function(response){\n      var networkFetch = fetch(request).then(function(networkResponse){\n        cache.put(storageUrl, networkResponse.clone());\n        return networkResponse;\n        });\n      return response || networkFetch;\n    });\n  });\n}\n\nfunction servePhoto(request) {\n  var storageUrl = request.url.replace(/-\\d+px\\.jpg$/, '');\n\n  return caches.open(contentImgsCache).then(function(cache) {\n    return cache.match(storageUrl).then(function(response) {\n      if (response) return response;\n\n      return fetch(request).then(function(networkResponse) {\n        cache.put(storageUrl, networkResponse.clone());\n        return networkResponse;\n      });\n    });\n  });\n}\n\nself.addEventListener('message', function(event) {\n  if (event.data.action === 'skipWaiting') {\n    self.skipWaiting();\n  }\n});","var r=FetchEvent.prototype.respondWith\nFetchEvent.prototype.respondWith=function(){return new URL(this.request.url).search.endsWith(\"bypass-sw\")?void 0:r.apply(this,arguments)}"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJDOi9Vc2Vycy9hZWt3ZWoyL1dvcmtzcGFjZS9nb29nbGVTY2hvbGFyc2hpcC93aXR0ci9wdWJsaWMvanMvc3cvaW5kZXguanMiLCJDOi9Vc2Vycy9hZWt3ZWoyL1dvcmtzcGFjZS9nb29nbGVTY2hvbGFyc2hpcC93aXR0ci9wdWJsaWMvanMvc3cvcHJlcm9sbC9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDQUEsSUFBSSxlQUFlLEdBQUcsaUJBQWlCLENBQUM7QUFDeEMsSUFBSSxnQkFBZ0IsR0FBRyxvQkFBb0IsQ0FBQztBQUM1QyxJQUFJLFNBQVMsR0FBRyxDQUNkLGVBQWUsRUFDZixnQkFBZ0IsQ0FDakIsQ0FBQzs7QUFFRixJQUFJLENBQUMsZ0JBQWdCLENBQUMsU0FBUyxFQUFFLFVBQVMsS0FBSyxFQUFFO0FBQy9DLE9BQUssQ0FBQyxTQUFTLENBQ2IsTUFBTSxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBUyxLQUFLLEVBQUU7QUFDaEQsV0FBTyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQ2xCLFdBQVcsRUFDWCxZQUFZLEVBQ1osY0FBYyxFQUNkLGVBQWUsRUFDZixvRUFBb0UsRUFDcEUseUZBQXlGLENBQzFGLENBQUMsQ0FBQztHQUNKLENBQUMsQ0FDSCxDQUFDO0NBQ0gsQ0FBQyxDQUFDOztBQUVILElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxVQUFVLEVBQUUsVUFBUyxLQUFLLEVBQUU7QUFDaEQsT0FBSyxDQUFDLFNBQVMsQ0FDYixNQUFNLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxDQUFDLFVBQVMsVUFBVSxFQUFFO0FBQ3RDLFdBQU8sT0FBTyxDQUFDLEdBQUcsQ0FDaEIsVUFBVSxDQUFDLE1BQU0sQ0FBQyxVQUFTLFNBQVMsRUFBRTtBQUNwQyxhQUFPLFNBQVMsQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLElB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RTtBQUNuRCxhQUFLLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBRSxlQUFlLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQztBQUMvQyxlQUFPLGVBQWUsQ0FBQztPQUN4QixDQUFDLENBQUM7S0FDSixDQUFDLENBQUM7R0FDSixDQUFDLENBQUM7Q0FDSjs7QUFFRCxJQUFJLENBQUMsZ0JBQWdCLENBQUMsU0FBUyxFQUFFLFVBQVMsS0FBSyxFQUFFO0FBQy9DLE1BQUksS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLEtBQUssYUFBYSxFQUFFO0FBQ3ZDLFFBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztHQUNwQjtDQUNGLENBQUMsQ0FBQzs7Ozs7QUMzR0gsSUFBSSxDQUFDLEdBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxXQUFXLENBQUE7QUFDdEMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxXQUFXLEdBQUMsWUFBVTtBQUFDLFNBQU8sSUFBSSxHQUFHLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxHQUFDLEtBQUssQ0FBQyxHQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFDLFNBQVMsQ0FBQyxDQUFBO0NBQUMsQ0FBQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJ2YXIgc3RhdGljQ2FjaGVOYW1lID0gJ3dpdHRyLXN0YXRpYy12OCc7XG52YXIgY29udGVudEltZ3NDYWNoZSA9ICd3aXR0ci1jb250ZW50LWltZ3MnO1xudmFyIGFsbENhY2hlcyA9IFtcbiAgc3RhdGljQ2FjaGVOYW1lLFxuICBjb250ZW50SW1nc0NhY2hlXG5dO1xuXG5zZWxmLmFkZEV2ZW50TGlzdGVuZXIoJ2luc3RhbGwnLCBmdW5jdGlvbihldmVudCkge1xuICBldmVudC53YWl0VW50aWwoXG4gICAgY2FjaGVzLm9wZW4oc3RhdGljQ2FjaGVOYW1lKS50aGVuKGZ1bmN0aW9uKGNhY2hlKSB7XG4gICAgICByZXR1cm4gY2FjaGUuYWRkQWxsKFtcbiAgICAgICAgJy9za2VsZXRvbicsXG4gICAgICAgICdqcy9tYWluLmpzJyxcbiAgICAgICAgJ2Nzcy9tYWluLmNzcycsXG4gICAgICAgICdpbWdzL2ljb24ucG5nJyxcbiAgICAgICAgJ2h0dHBzOi8vZm9udHMuZ3N0YXRpYy5jb20vcy9yb2JvdG8vdjE1LzJVWDdXTFRmVzNXOFRjbFRVdmxGeVEud29mZicsXG4gICAgICAgICdodHRwczovL2ZvbnRzLmdzdGF0aWMuY29tL3Mvcm9ib3RvL3YxNS9kLTZJWXBsT0ZvY0NhY0t6eHdYU09EOEUwaTdLWm4tRVBueW8zSFp1N2t3LndvZmYnXG4gICAgICBdKTtcbiAgICB9KVxuICApO1xufSk7XG5cbnNlbGYuYWRkRXZlbnRMaXN0ZW5lcignYWN0aXZhdGUnLCBmdW5jdGlvbihldmVudCkge1xuICBldmVudC53YWl0VW50aWwoXG4gICAgY2FjaGVzLmtleXMoKS50aGVuKGZ1bmN0aW9uKGNhY2hlTmFtZXMpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLmFsbChcbiAgICAgICAgY2FjaGVOYW1lcy5maWx0ZXIoZnVuY3Rpb24oY2FjaGVOYW1lKSB7XG4gICAgICAgICAgcmV0dXJuIGNhY2hlTmFtZS5zdGFydHNXaXRoKCd3aXR0ci0nKSAmJlxuICAgICAgICAgICAgICAgICAhYWxsQ2FjaGVzLmluY2x1ZGVzKGNhY2hlTmFtZSk7XG4gICAgICAgIH0pLm1hcChmdW5jdGlvbihjYWNoZU5hbWUpIHtcbiAgICAgICAgICByZXR1cm4gY2FjaGVzLmRlbGV0ZShjYWNoZU5hbWUpO1xuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9KVxuICApO1xufSk7XG5cbnNlbGYuYWRkRXZlbnRMaXN0ZW5lcignZmV0Y2gnLCBmdW5jdGlvbihldmVudCkge1xuICB2YXIgcmVxdWVzdFVybCA9IG5ldyBVUkwoZXZlbnQucmVxdWVzdC51cmwpO1xuXG4gIGlmIChyZXF1ZXN0VXJsLm9yaWdpbiA9PT0gbG9jYXRpb24ub3JpZ2luKSB7XG4gICAgaWYgKHJlcXVlc3RVcmwucGF0aG5hbWUgPT09ICcvJykge1xuICAgICAgZXZlbnQucmVzcG9uZFdpdGgoY2FjaGVzLm1hdGNoKCcvc2tlbGV0b24nKSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChyZXF1ZXN0VXJsLnBhdGhuYW1lLnN0YXJ0c1dpdGgoJy9waG90b3MvJykpIHtcbiAgICAgIGV2ZW50LnJlc3BvbmRXaXRoKHNlcnZlUGhvdG8oZXZlbnQucmVxdWVzdCkpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyByZXNwb25kIHRvIGF2YXRhciB1cmxzIGJ5IHJlc3BvbmRpbmcgd2l0aFxuICAgIC8vIHRoZSByZXR1cm4gdmFsdWUgb2Ygc2VydmVBdmF0YXIoZXZlbnQucmVxdWVzdClcbiAgICBpZiAocmVxdWVzdFVybC5wYXRobmFtZS5zdGFydHNXaXRoKCcvYXZhdGFycy8nKSl7XG4gICAgICBldmVudC5yZXNwb25kV2l0aChzZXJ2ZUF2YXRhcihldmVudC5yZXF1ZXN0KSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG5cbiAgZXZlbnQucmVzcG9uZFdpdGgoXG4gICAgY2FjaGVzLm1hdGNoKGV2ZW50LnJlcXVlc3QpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgIHJldHVybiByZXNwb25zZSB8fCBmZXRjaChldmVudC5yZXF1ZXN0KTtcbiAgICB9KVxuICApO1xufSk7XG5cbmZ1bmN0aW9uIHNlcnZlQXZhdGFyKHJlcXVlc3QpIHtcbiAgLy8gQXZhdGFyIHVybHMgbG9vayBsaWtlOlxuICAvLyBhdmF0YXJzL3NhbS0yeC5qcGdcbiAgLy8gQnV0IHN0b3JhZ2VVcmwgaGFzIHRoZSAtMnguanBnIGJpdCBtaXNzaW5nLlxuICAvLyBVc2UgdGhpcyB1cmwgdG8gc3RvcmUgJiBtYXRjaCB0aGUgaW1hZ2UgaW4gdGhlIGNhY2hlLlxuICAvLyBUaGlzIG1lYW5zIHlvdSBvbmx5IHN0b3JlIG9uZSBjb3B5IG9mIGVhY2ggYXZhdGFyLlxuICB2YXIgc3RvcmFnZVVybCA9IHJlcXVlc3QudXJsLnJlcGxhY2UoLy1cXGR4XFwuanBnJC8sICcnKTtcblxuICAvLyByZXR1cm4gaW1hZ2VzIGZyb20gdGhlIFwid2l0dHItY29udGVudC1pbWdzXCIgY2FjaGVcbiAgLy8gaWYgdGhleSdyZSBpbiB0aGVyZS4gQnV0IGFmdGVyd2FyZHMsIGdvIHRvIHRoZSBuZXR3b3JrXG4gIC8vIHRvIHVwZGF0ZSB0aGUgZW50cnkgaW4gdGhlIGNhY2hlLlxuICAvL1xuICAvLyBOb3RlIHRoYXQgdGhpcyBpcyBzbGlnaHRseSBkaWZmZXJlbnQgdG8gc2VydmVQaG90byFcbiAgcmV0dXJuIGNhY2hlcy5vcGVuKGNvbnRlbnRJbWdzQ2FjaGUpLnRoZW4oZnVuY3Rpb24oY2FjaGUpe1xuICAgIHJldHVybiBjYWNoZS5tYXRjaChzdG9yYWdlVXJsKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgIHZhciBuZXR3b3JrRmV0Y2ggPSBmZXRjaChyZXF1ZXN0KS50aGVuKGZ1bmN0aW9uKG5ldHdvcmtSZXNwb25zZSl7XG4gICAgICAgIGNhY2hlLnB1dChzdG9yYWdlVXJsLCBuZXR3b3JrUmVzcG9uc2UuY2xvbmUoKSk7XG4gICAgICAgIHJldHVybiBuZXR3b3JrUmVzcG9uc2U7XG4gICAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJlc3BvbnNlIHx8IG5ldHdvcmtGZXRjaDtcbiAgICB9KTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHNlcnZlUGhvdG8ocmVxdWVzdCkge1xuICB2YXIgc3RvcmFnZVVybCA9IHJlcXVlc3QudXJsLnJlcGxhY2UoLy1cXGQrcHhcXC5qcGckLywgJycpO1xuXG4gIHJldHVybiBjYWNoZXMub3Blbihjb250ZW50SW1nc0NhY2hlKS50aGVuKGZ1bmN0aW9uKGNhY2hlKSB7XG4gICAgcmV0dXJuIGNhY2hlLm1hdGNoKHN0b3JhZ2VVcmwpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgIGlmIChyZXNwb25zZSkgcmV0dXJuIHJlc3BvbnNlO1xuXG4gICAgICByZXR1cm4gZmV0Y2gocmVxdWVzdCkudGhlbihmdW5jdGlvbihuZXR3b3JrUmVzcG9uc2UpIHtcbiAgICAgICAgY2FjaGUucHV0KHN0b3JhZ2VVcmwsIG5ldHdvcmtSZXNwb25zZS5jbG9uZSgpKTtcbiAgICAgICAgcmV0dXJuIG5ldHdvcmtSZXNwb25zZTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn1cblxuc2VsZi5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgaWYgKGV2ZW50LmRhdGEuYWN0aW9uID09PSAnc2tpcFdhaXRpbmcnKSB7XG4gICAgc2VsZi5za2lwV2FpdGluZygpO1xuICB9XG59KTsiLCJ2YXIgcj1GZXRjaEV2ZW50LnByb3RvdHlwZS5yZXNwb25kV2l0aFxuRmV0Y2hFdmVudC5wcm90b3R5cGUucmVzcG9uZFdpdGg9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFVSTCh0aGlzLnJlcXVlc3QudXJsKS5zZWFyY2guZW5kc1dpdGgoXCJieXBhc3Mtc3dcIik/dm9pZCAwOnIuYXBwbHkodGhpcyxhcmd1bWVudHMpfSJdfQ=="}